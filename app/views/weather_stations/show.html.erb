<div class="container m-5">
  <h1 id="weather-headline">Weather</h1>

  <!-- Station name and country -->
  <h3 id="weather-station-headline"><%= "#{@station.name}, #{@station.country}" %></h3>

  <!-- Current forecast -->
  <%= render "current", data: @current %>

  <!-- Render a forecast for each day of the 3 day forecast (render does not work with the carousel action) -->
  <h1 id="weather-headline">3-Day Forecast</h1>
  <div id="carouselExampleControls" class="carousel slide" data-ride="false" data-touch="true" data-interval="false">
    <div class="carousel-inner">
      <% @forecast.each_with_index do | (day, data), index | %>
          <% if data[:temp_c_avg].round(1) > 24 %>
          <!-- hot -->
          <% weather_border = "#FA520A" %>
          <% elsif data[:temp_c_avg].round(1) < 10 %>
            <!-- cold -->
              <% weather_border = "#FA9E0A" %>
          <% else %>
            <!-- Medium -->
              <% weather_border = "#B9F5F2" %>
          <% end %>

        <% if index == 0 %>
          <div class="weather-card carousel-item active" style="border-left: 16px solid <%= weather_border %>">
            <h3 id="weather-card-headline"><%= day %></h3>
            <div class="weather-card-text">
              <div><%= image_tag "weather_icons/#{data[:icon]}.png" %></div>
              <div><%= "Avg temp (°C): #{data[:temp_c_avg].round(1)}" %></div>
              <div><%= "Min temp (°C): #{data[:temp_c_min].round(1)}" %></div>
              <div><%= "Avg temp (°C): #{data[:temp_c_max].round(1)}" %></div>
              <div><%= "Rain (mm): #{data[:rain_mm_tot].round(1)}" %></div>
              <% unless data[:snow_mm_tot].nil? %>
                <div><%= "Snow (mm): #{data[:snow_mm_tot].round(1)}" %></div>
              <% end %>
              <div><%= "Avg humidity (%): #{data[:humidity_perc_avg].round(0)}" %></div>
              <div><%= "Wind (km/h): #{data[:wind_direction]} #{(data[:wind_speed_mps_avg]*3.6).round(0)}" %></div>
              <div><%= "Description: #{data[:description]}" %></div>
            </div>
          </div>
        <% else %>
          <div class="weather-card carousel-item" style="border-left: 16px solid <%= weather_border %>">
            <h3 id="weather-card-headline"><%= day %></h3>
            <div class="weather-card-text">
              <div><%= image_tag "weather_icons/#{data[:icon]}.png" %></div>
              <div><%= "Avg temp (°C): #{data[:temp_c_avg].round(1)}" %></div>
              <div><%= "Min temp (°C): #{data[:temp_c_min].round(1)}" %></div>
              <div><%= "Avg temp (°C): #{data[:temp_c_max].round(1)}" %></div>
              <div><%= "Rain (mm): #{data[:rain_mm_tot].round(1)}" %></div>
              <% unless data[:snow_mm_tot].nil? %>
                <div><%= "Snow (mm): #{data[:snow_mm_tot].round(1)}" %></div>
              <% end %>
              <div><%= "Avg humidity (%): #{data[:humidity_perc_avg].round(0)}" %></div>
              <div><%= "Wind (km/h): #{data[:wind_direction]} #{(data[:wind_speed_mps_avg]*3.6).round(0)}" %></div>
              <div><%= "Description: #{data[:description]}" %></div>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>
      <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
  </div>

  <br>
  <br>
  <br>

</div>
